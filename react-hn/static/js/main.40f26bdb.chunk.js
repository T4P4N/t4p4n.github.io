(this["webpackJsonpreact-typescript"]=this["webpackJsonpreact-typescript"]||[]).push([[0],{27:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var c=n(20),r=(n(27),n(21)),s=n(4),a=n(6),o=n(10),i=n.n(o),u=n(1),b=n(22),j=n.n(b),l=n(57),O=n(53),d=n(54),h=n(55),m=n(5),p=n(0),f=function(t){var e=t.item,n=t.onRemoveItem;return Object(p.jsxs)("div",{className:"posts",children:[Object(p.jsxs)("h4",{className:"title",children:[Object(p.jsx)("button",{type:"button",onClick:function(){n(e),console.log("Removed --\x3e "+e.title)},"data-testid":"remove-btn",children:Object(p.jsx)(O.a,{height:"15px",width:"15px",className:"x-btn"})}),Object(p.jsx)("a",{href:e.url,children:e.title})]}),Object(p.jsxs)("p",{className:"author","data-testid":"author",children:[Object(p.jsx)(d.a,{size:14})," ",e.author]}),Object(p.jsxs)("p",{className:"points",children:[Object(p.jsx)(h.a,{})," ",e.points]})]},e.objectID)},x=function(t){var e=t.data,n=t.onRemoveItem,c=u.useState({sortKey:"NONE",is_rev:!1}),r=Object(a.a)(c,2),s=r[0],o=r[1],i={NONE:function(t){return t},TITLE:function(t){return Object(m.sortBy)(t,"title")},AUTHOR:function(t){return Object(m.sortBy)(t,"author")},COMMENT:function(t){return Object(m.sortBy)(t,"num_comments").reverse()},POINT:function(t){return Object(m.sortBy)(t,"points").reverse()}}[s.sortKey],b=s.is_rev?i(e).reverse():i(e),j=function(t){var e=s.sortKey===t&&!s.is_rev;o({sortKey:t,is_rev:e})};return Object(p.jsxs)(p.Fragment,{children:["NONE"!==s.sortKey?Object(p.jsx)("button",{className:"rm-btn",onClick:function(){o({sortKey:"NONE",is_rev:!1})},children:"Remove Filter"}):Object(p.jsx)(p.Fragment,{}),Object(p.jsxs)("div",{className:"filters",children:[Object(p.jsx)("button",{className:s.is_rev||"TITLE"!==s.sortKey?s.is_rev&&"TITLE"===s.sortKey?"sort-btn-active sort-btn-des":"sort-btn":"sort-btn-active sort-btn-asc",onClick:function(){return j("TITLE")},children:"Title"}),Object(p.jsx)("button",{className:s.is_rev||"AUTHOR"!==s.sortKey?s.is_rev&&"AUTHOR"===s.sortKey?"sort-btn-active sort-btn-des":"sort-btn":"sort-btn-active sort-btn-asc",onClick:function(){return j("AUTHOR")},children:"Author"}),Object(p.jsx)("button",{className:s.is_rev||"POINT"!==s.sortKey?s.is_rev&&"POINT"===s.sortKey?"sort-btn-active sort-btn-des":"sort-btn":"sort-btn-active sort-btn-asc",onClick:function(){return j("POINT")},children:"points"}),Object(p.jsx)("button",{className:s.is_rev||"COMMENT"!==s.sortKey?s.is_rev&&"COMMENT"===s.sortKey?"sort-btn-active sort-btn-des":"sort-btn":"sort-btn-active sort-btn-asc",onClick:function(){return j("COMMENT")},children:"comments"})]}),b.map((function(t){return Object(p.jsx)(f,{item:t,onRemoveItem:n},t.objectID)}))]})},v=n(56),N=function(t){var e=t.id,n=t.value,c=t.type,r=void 0===c?"text":c,s=t.onInputChange,a=t.isFocused,o=t.children,i=u.useRef(null);return u.useEffect((function(){a&&i.current&&i.current.focus()}),[a]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("label",{htmlFor:e,children:o}),"\xa0",Object(p.jsx)("input",{id:e,type:r,value:n,onChange:s})]})},g=function(t){var e=t.searchTerm,n=t.onSearchInput,c=t.onSearchSubmit;return Object(p.jsxs)("form",{onSubmit:c,children:[Object(p.jsx)(N,{id:"search",value:e,isFocused:!0,onInputChange:n}),Object(p.jsx)("button",{type:"submit",disabled:!e,className:"search-btn",children:Object(p.jsx)(v.a,{height:"20px",width:"20px",className:"search-btn"})})]})},E=function(){return Object(p.jsx)("div",{className:"post-container",children:Object(p.jsxs)("div",{className:"shimmer-posts",children:[Object(p.jsx)("h4",{className:"shimmer-title shimmer",children:"111"}),Object(p.jsx)("p",{className:"shimmer-author shimmer","data-testid":"author",children:"000"}),Object(p.jsx)("p",{className:"shimmer-points shimmer",children:"000"})]})})},y="query=",T=function(t,e){switch(e.type){case"STORIES_FETCH_INIT":return Object(s.a)(Object(s.a)({},t),{},{isLoading:!0,isError:!1});case"STORIES_FETCH_SUCCESS":return Object(s.a)(Object(s.a)({},t),{},{isLoading:!1,isError:!1,data:0===e.payload.page?e.payload.list:t.data.concat(e.payload.list),page:e.payload.page});case"STORIES_FETCH_FAILURE":return Object(s.a)(Object(s.a)({},t),{},{isLoading:!1,isError:!0});case"REMOVE_STORY":return Object(s.a)(Object(s.a)({},t),{},{data:t.data.filter((function(t){return e.payload.objectID!==t.objectID}))});default:throw new Error}},I=function(t){return t.substring(t.lastIndexOf("?")+1,t.lastIndexOf("&")).replace(y,"")},S=function(t,e){return"".concat("https://hn.algolia.com/api/v1/").concat("/search","?").concat(y).concat(t,"&").concat("page=").concat(e)},_=function(){var t=function(t,e){var n=u.useState(localStorage.getItem(t)||e),c=Object(a.a)(n,2),r=c[0],s=c[1];return u.useEffect((function(){localStorage.setItem(t,r)}),[r,t]),[r,s]}("state",""),e=Object(a.a)(t,2),n=e[0],c=e[1],s=u.useState([S(n,0)]),o=Object(a.a)(s,2),b=o[0],O=o[1],d=u.useReducer(T,{data:[],page:0,isLoading:!1,isError:!1}),h=Object(a.a)(d,2),f=h[0],v=h[1],N=u.useCallback(Object(r.a)(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return v({type:"STORIES_FETCH_INIT"}),t.prev=1,e=b[b.length-1],t.next=5,j.a.get(e);case 5:n=t.sent,v({type:"STORIES_FETCH_SUCCESS",payload:{list:n.data.hits,page:n.data.page}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),v({type:"STORIES_FETCH_FAILURE"});case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),[b]);u.useEffect((function(){N()}),[N]);var y=function(t,e){c(t);var n=S(t,e);O(b.concat(n))},_=function(t){return Object(m.uniq)(t.reduce((function(t,e,n){var c=I(e);return 0===n?t.concat(c):c===t[t.length-1]?t:t.concat(c)}),[]).slice(-6).slice(0,-1))}(b).filter((function(t){return t.length>=1}));return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h1",{className:"main-head",children:"Hacker News"}),Object(p.jsx)(g,{searchTerm:n,onSearchInput:function(t){c(t.target.value)},onSearchSubmit:function(t){t.preventDefault(),y(n,0)}}),_.length>0?Object(p.jsxs)("p",{className:"recent-search",children:[Object(p.jsx)("span",{className:"rs-head",children:"Recent Searches:"}),_.map((function(t,e){return Object(p.jsx)("button",{className:"rs-btn",type:"button",onClick:function(){return function(t){y(t,0)}(t)},children:t},e)}))]}):Object(p.jsx)(p.Fragment,{}),f.isError&&Object(p.jsx)("p",{children:"Something went wrong"}),f.isLoading?[1,2,3,4,5].map((function(t){return Object(p.jsx)(E,{},t)})):Object(p.jsx)(p.Fragment,{}),Object(p.jsx)("div",{className:"post-container",children:Object(p.jsx)(x,{data:f.data,onRemoveItem:function(t){v({type:"REMOVE_STORY",payload:t})}})}),f.isLoading?Object(p.jsx)(p.Fragment,{}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("button",{type:"button",className:"more-btn",onClick:function(){var t=b[b.length-1],e=I(t);y(e,f.page+1)},children:"load more"})}),f.isLoading?[1,2,3,4,5].map((function(t){return Object(p.jsx)(E,{},t)})):Object(p.jsx)(p.Fragment,{}),Object(p.jsx)("footer",{children:Object(p.jsxs)("h3",{className:"footer",children:["Made with ",Object(p.jsx)(l.a,{})," by T4P4N"]})})]})},C=document.getElementById("root");Object(c.render)(Object(p.jsx)(_,{}),C)}},[[52,1,2]]]);
//# sourceMappingURL=main.40f26bdb.chunk.js.map