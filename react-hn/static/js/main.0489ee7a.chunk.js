(this["webpackJsonpreact-typescript"]=this["webpackJsonpreact-typescript"]||[]).push([[0],{27:function(t,e,n){},52:function(t,e,n){"use strict";n.r(e);var c=n(20),r=(n(27),n(21)),s=n(4),a=n(6),o=n(10),i=n.n(o),u=n(1),b=n(22),l=n.n(b),j=n(57),d=n(53),O=n(54),h=n(55),m=n(5),p=n(0),f=function(t){var e=t.item,n=t.onRemoveItem;return Object(p.jsxs)("div",{className:"posts",children:[Object(p.jsxs)("h4",{className:"title",children:[Object(p.jsx)("button",{type:"button",onClick:function(){n(e),console.log("Removed --\x3e "+e.title)},"data-testid":"remove-btn",children:Object(p.jsx)(d.a,{height:"15px",width:"15px",className:"x-btn"})}),Object(p.jsx)("a",{href:e.url,children:e.title})]}),Object(p.jsxs)("p",{className:"author","data-testid":"author",children:[Object(p.jsx)(O.a,{size:14})," ",e.author]}),Object(p.jsxs)("p",{className:"points",children:[Object(p.jsx)(h.a,{})," ",e.points]})]},e.objectID)},v=function(t){var e=t.data,n=t.onRemoveItem,c=u.useState({sortKey:"NONE",is_rev:!1}),r=Object(a.a)(c,2),s=r[0],o=r[1],i={NONE:function(t){return t},TITLE:function(t){return Object(m.sortBy)(t,"title")},AUTHOR:function(t){return Object(m.sortBy)(t,"author")},COMMENT:function(t){return Object(m.sortBy)(t,"num_comments").reverse()},POINT:function(t){return Object(m.sortBy)(t,"points").reverse()}}[s.sortKey],b=s.is_rev?i(e).reverse():i(e),l=function(t){var e=s.sortKey===t&&!s.is_rev;o({sortKey:t,is_rev:e})};return Object(p.jsxs)(p.Fragment,{children:["NONE"!==s.sortKey?Object(p.jsx)("button",{className:"rm-btn",onClick:function(){o({sortKey:"NONE",is_rev:!1})},children:"Remove Filter"}):Object(p.jsx)(p.Fragment,{}),Object(p.jsxs)("div",{className:"filters",children:[Object(p.jsx)("button",{className:s.is_rev||"TITLE"!==s.sortKey?s.is_rev&&"TITLE"===s.sortKey?"sort-btn-active sort-btn-des":"sort-btn":"sort-btn-active sort-btn-asc",onClick:function(){return l("TITLE")},children:"Title"}),Object(p.jsx)("button",{className:s.is_rev||"AUTHOR"!==s.sortKey?s.is_rev&&"AUTHOR"===s.sortKey?"sort-btn-active sort-btn-des":"sort-btn":"sort-btn-active sort-btn-asc",onClick:function(){return l("AUTHOR")},children:"Author"}),Object(p.jsx)("button",{className:s.is_rev||"POINT"!==s.sortKey?s.is_rev&&"POINT"===s.sortKey?"sort-btn-active sort-btn-des":"sort-btn":"sort-btn-active sort-btn-asc",onClick:function(){return l("POINT")},children:"points"}),Object(p.jsx)("button",{className:s.is_rev||"COMMENT"!==s.sortKey?s.is_rev&&"COMMENT"===s.sortKey?"sort-btn-active sort-btn-des":"sort-btn":"sort-btn-active sort-btn-asc",onClick:function(){return l("COMMENT")},children:"comments"})]}),b.map((function(t){return Object(p.jsx)(f,{item:t,onRemoveItem:n},t.objectID)}))]})},x=n(56),N=function(t){var e=t.id,n=t.value,c=t.type,r=void 0===c?"text":c,s=t.onInputChange,a=t.isFocused,o=t.children,i=u.useRef(null);return u.useEffect((function(){a&&i.current&&i.current.focus()}),[a]),Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("label",{htmlFor:e,children:o}),"\xa0",Object(p.jsx)("input",{id:e,type:r,value:n,onChange:s})]})},g=function(t){var e=t.searchTerm,n=t.onSearchInput,c=t.onSearchSubmit;return Object(p.jsxs)("form",{onSubmit:c,children:[Object(p.jsx)(N,{id:"search",value:e,isFocused:!0,onInputChange:n}),Object(p.jsx)("button",{type:"submit",disabled:!e,className:"search-btn",children:Object(p.jsx)(x.a,{height:"20px",width:"20px",className:"search-btn"})})]})},E="query=",y=function(t,e){switch(e.type){case"STORIES_FETCH_INIT":return Object(s.a)(Object(s.a)({},t),{},{isLoading:!0,isError:!1});case"STORIES_FETCH_SUCCESS":return Object(s.a)(Object(s.a)({},t),{},{isLoading:!1,isError:!1,data:0===e.payload.page?e.payload.list:t.data.concat(e.payload.list),page:e.payload.page});case"STORIES_FETCH_FAILURE":return Object(s.a)(Object(s.a)({},t),{},{isLoading:!1,isError:!0});case"REMOVE_STORY":return Object(s.a)(Object(s.a)({},t),{},{data:t.data.filter((function(t){return e.payload.objectID!==t.objectID}))});default:throw new Error}},T=function(t){return t.substring(t.lastIndexOf("?")+1,t.lastIndexOf("&")).replace(E,"")},I=function(t,e){return"".concat("https://hn.algolia.com/api/v1/").concat("/search","?").concat(E).concat(t,"&").concat("page=").concat(e)},S=function(){var t=function(t,e){var n=u.useState(localStorage.getItem(t)||e),c=Object(a.a)(n,2),r=c[0],s=c[1];return u.useEffect((function(){localStorage.setItem(t,r)}),[r,t]),[r,s]}("state",""),e=Object(a.a)(t,2),n=e[0],c=e[1],s=u.useState([I(n,0)]),o=Object(a.a)(s,2),b=o[0],d=o[1],O=u.useReducer(y,{data:[],page:0,isLoading:!1,isError:!1}),h=Object(a.a)(O,2),f=h[0],x=h[1],N=u.useCallback(Object(r.a)(i.a.mark((function t(){var e,n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x({type:"STORIES_FETCH_INIT"}),t.prev=1,e=b[b.length-1],t.next=5,l.a.get(e);case 5:n=t.sent,x({type:"STORIES_FETCH_SUCCESS",payload:{list:n.data.hits,page:n.data.page}}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),x({type:"STORIES_FETCH_FAILURE"});case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),[b]);u.useEffect((function(){N()}),[N]);var E=function(t,e){c(t);var n=I(t,e);d(b.concat(n))},S=function(t){return Object(m.uniq)(t.reduce((function(t,e,n){var c=T(e);return 0===n?t.concat(c):c===t[t.length-1]?t:t.concat(c)}),[]).slice(-6).slice(0,-1))}(b).filter((function(t){return t.length>=1}));return Object(p.jsxs)("div",{className:"container",children:[Object(p.jsx)("h1",{className:"main-head",children:"Hacker News"}),Object(p.jsx)(g,{searchTerm:n,onSearchInput:function(t){c(t.target.value)},onSearchSubmit:function(t){t.preventDefault(),E(n,0)}}),S.length>0?Object(p.jsxs)("p",{className:"recent-search",children:[Object(p.jsx)("span",{className:"rs-head",children:"Recent Searches:"}),S.map((function(t,e){return Object(p.jsx)("button",{className:"rs-btn",type:"button",onClick:function(){return function(t){E(t,0)}(t)},children:t},e)}))]}):Object(p.jsx)(p.Fragment,{}),Object(p.jsx)("br",{}),f.isError&&Object(p.jsx)("p",{children:"Something went wrong"}),f.isLoading?Object(p.jsx)("div",{className:"lds-dual-ring"}):Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)("div",{className:"post-container",children:Object(p.jsx)(v,{data:f.data,onRemoveItem:function(t){x({type:"REMOVE_STORY",payload:t})}})}),f.isLoading?Object(p.jsx)("div",{className:"lds-dual-ring"}):Object(p.jsx)("button",{type:"button",className:"more-btn",onClick:function(){var t=b[b.length-1],e=T(t);E(e,f.page+1)},children:"load more"})]}),Object(p.jsx)("footer",{children:Object(p.jsxs)("h3",{className:"footer",children:["Made with ",Object(p.jsx)(j.a,{})," by T4P4N"]})})]})},_=document.getElementById("root");Object(c.render)(Object(p.jsx)(S,{}),_)}},[[52,1,2]]]);
//# sourceMappingURL=main.0489ee7a.chunk.js.map